"use strict";(self.webpackChunkespresso=self.webpackChunkespresso||[]).push([[27],{8850:function(e,a,n){n.r(a),n.d(a,{assets:function(){return k},contentTitle:function(){return c},default:function(){return g},frontMatter:function(){return o},metadata:function(){return N},toc:function(){return d}});var t=n(7462),s=n(3366),p=(n(7294),n(3905)),i=n(614),m="&CONTROL\n  calculation = 'nscf',\n  prefix = 'silicon',\n  outdir = '/tmp/silicon/'\n  pseudo_dir = '../pseudos/'\n  verbosity = 'high'\n/\n\n&SYSTEM\n  ibrav =  2,\n  celldm(1) = 10.26,\n  nat =  2,\n  ntyp = 1,\n  ecutwfc = 30\n  nbnd = 16\n  nosym = .true.\n  noinv = .true.\n/\n\n&ELECTRONS\n  mixing_beta = 0.6\n/\n\nATOMIC_SPECIES\n  Si 28.086 Si.pz-vbc.UPF\n\nATOMIC_POSITIONS (alat)\n  Si 0.0 0.0 0.0\n  Si 0.25 0.25 0.25\n\nK_POINTS (automatic)\n  30 30 30 0 0 0\n",r='&inputpp\n  outdir = "/tmp/silicon/"\n  prefix = "silicon"\n  calculation = "eps"\n/\n\n&energy_grid\n  smeartype = "gauss"\n  intersmear = 0.2\n  wmin =  0.0\n  wmax = 30.0\n  nw = 500\n/\n',l=["components"],o={title:"Dielectric constant"},c=void 0,N={unversionedId:"hands-on/epsilon",id:"hands-on/epsilon",title:"Dielectric constant",description:"First we perform our self consistent field calculation:",source:"@site/docs/hands-on/epsilon.mdx",sourceDirName:"hands-on",slug:"/hands-on/epsilon",permalink:"/espresso/hands-on/epsilon",draft:!1,editUrl:"https://github.com/pranabdas/espresso/blob/main/docs/hands-on/epsilon.mdx",tags:[],version:"current",frontMatter:{title:"Dielectric constant"},sidebar:"docs",previous:{title:"Bi2Se3 (TI)",permalink:"/espresso/hands-on/Bi2Se3"},next:{title:"Fermi Surface",permalink:"/espresso/hands-on/fermi-surface"}},k={},d=[],u={toc:d},h="wrapper";function g(e){var a=e.components,o=(0,s.Z)(e,l);return(0,p.kt)(h,(0,t.Z)({},u,o,{components:a,mdxType:"MDXLayout"}),(0,p.kt)("p",null,"First we perform our self consistent field calculation:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"mpirun -np 4 pw.x -in pw.scf.silicon.in > pw.scf.silicon.out\n")),(0,p.kt)("p",null,"Next step we perform ",(0,p.kt)("inlineCode",{parentName:"p"},"nscf")," calculation:"),(0,p.kt)(i.Z,{language:"bash",title:"src/silicon/pw.nscf.silicon_epsilon.in",showLineNumbers:!0,mdxType:"CodeBlock"},m),(0,p.kt)("p",null,"Especially, notice following changes:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-fortran"},"  nbnd = 16\n  nosym = .true.\n  noinv = .true.\n")),(0,p.kt)("p",null,"We turn off the automatic reduction of k-points that ",(0,p.kt)("inlineCode",{parentName:"p"},"pw.x")," does by using\ncrystal symmetries (",(0,p.kt)("inlineCode",{parentName:"p"},"nosym = .true.")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"noinv = .true."),"). This is because\n",(0,p.kt)("inlineCode",{parentName:"p"},"epsilon.x")," does not recognize crystal symmetries, therefore the entire list of\nk-points in the grid is needed. Secondly, we calculate a larger number of bands\n(16), since we are interested in interband transitions."),(0,p.kt)("p",null,"The final step is to prepare the input file for ",(0,p.kt)("inlineCode",{parentName:"p"},"epsilon.x"),":"),(0,p.kt)(i.Z,{language:"bash",title:"src/silicon/epsilon.si.in",showLineNumbers:!0,mdxType:"CodeBlock"},r),(0,p.kt)("p",null,"The variables ",(0,p.kt)("inlineCode",{parentName:"p"},"smeartype")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"intersmear")," define the numerical approximation\nused to represent the Dirac delta functions in the expression for ",(0,p.kt)("span",{parentName:"p",className:"math math-inline"},(0,p.kt)("span",{parentName:"span",className:"katex"},(0,p.kt)("span",{parentName:"span",className:"katex-mathml"},(0,p.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,p.kt)("semantics",{parentName:"math"},(0,p.kt)("mrow",{parentName:"semantics"},(0,p.kt)("msub",{parentName:"mrow"},(0,p.kt)("mi",{parentName:"msub"},"\u03f5"),(0,p.kt)("mn",{parentName:"msub"},"2"))),(0,p.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\epsilon_2")))),(0,p.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,p.kt)("span",{parentName:"span",className:"base"},(0,p.kt)("span",{parentName:"span",className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,p.kt)("span",{parentName:"span",className:"mord"},(0,p.kt)("span",{parentName:"span",className:"mord mathnormal"},"\u03f5"),(0,p.kt)("span",{parentName:"span",className:"msupsub"},(0,p.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,p.kt)("span",{parentName:"span",className:"vlist-r"},(0,p.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3011em"}},(0,p.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},(0,p.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,p.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,p.kt)("span",{parentName:"span",className:"mord mtight"},"2")))),(0,p.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,p.kt)("span",{parentName:"span",className:"vlist-r"},(0,p.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,p.kt)("span",{parentName:"span"})))))))))),"\ngiven above. The variables ",(0,p.kt)("inlineCode",{parentName:"p"},"wmin"),", ",(0,p.kt)("inlineCode",{parentName:"p"},"wmax")," and ",(0,p.kt)("inlineCode",{parentName:"p"},"nw")," define the energy grid for\nthe dielectric function. All the energy variables are in eV."),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-bash"},"mpirun -np 1 epsilon.x < epsilon.si.in > epsilon.si.out\n")),(0,p.kt)("p",null,"We will see the results are saved in separate ",(0,p.kt)("inlineCode",{parentName:"p"},".dat")," files. We can plot the real\n(",(0,p.kt)("span",{parentName:"p",className:"math math-inline"},(0,p.kt)("span",{parentName:"span",className:"katex"},(0,p.kt)("span",{parentName:"span",className:"katex-mathml"},(0,p.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,p.kt)("semantics",{parentName:"math"},(0,p.kt)("mrow",{parentName:"semantics"},(0,p.kt)("msub",{parentName:"mrow"},(0,p.kt)("mi",{parentName:"msub"},"\u03f5"),(0,p.kt)("mn",{parentName:"msub"},"1"))),(0,p.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\epsilon_1")))),(0,p.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,p.kt)("span",{parentName:"span",className:"base"},(0,p.kt)("span",{parentName:"span",className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,p.kt)("span",{parentName:"span",className:"mord"},(0,p.kt)("span",{parentName:"span",className:"mord mathnormal"},"\u03f5"),(0,p.kt)("span",{parentName:"span",className:"msupsub"},(0,p.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,p.kt)("span",{parentName:"span",className:"vlist-r"},(0,p.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3011em"}},(0,p.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},(0,p.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,p.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,p.kt)("span",{parentName:"span",className:"mord mtight"},"1")))),(0,p.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,p.kt)("span",{parentName:"span",className:"vlist-r"},(0,p.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,p.kt)("span",{parentName:"span"})))))))))),") and imaginary (",(0,p.kt)("span",{parentName:"p",className:"math math-inline"},(0,p.kt)("span",{parentName:"span",className:"katex"},(0,p.kt)("span",{parentName:"span",className:"katex-mathml"},(0,p.kt)("math",{parentName:"span",xmlns:"http://www.w3.org/1998/Math/MathML"},(0,p.kt)("semantics",{parentName:"math"},(0,p.kt)("mrow",{parentName:"semantics"},(0,p.kt)("msub",{parentName:"mrow"},(0,p.kt)("mi",{parentName:"msub"},"\u03f5"),(0,p.kt)("mn",{parentName:"msub"},"2"))),(0,p.kt)("annotation",{parentName:"semantics",encoding:"application/x-tex"},"\\epsilon_2")))),(0,p.kt)("span",{parentName:"span",className:"katex-html","aria-hidden":"true"},(0,p.kt)("span",{parentName:"span",className:"base"},(0,p.kt)("span",{parentName:"span",className:"strut",style:{height:"0.5806em",verticalAlign:"-0.15em"}}),(0,p.kt)("span",{parentName:"span",className:"mord"},(0,p.kt)("span",{parentName:"span",className:"mord mathnormal"},"\u03f5"),(0,p.kt)("span",{parentName:"span",className:"msupsub"},(0,p.kt)("span",{parentName:"span",className:"vlist-t vlist-t2"},(0,p.kt)("span",{parentName:"span",className:"vlist-r"},(0,p.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.3011em"}},(0,p.kt)("span",{parentName:"span",style:{top:"-2.55em",marginLeft:"0em",marginRight:"0.05em"}},(0,p.kt)("span",{parentName:"span",className:"pstrut",style:{height:"2.7em"}}),(0,p.kt)("span",{parentName:"span",className:"sizing reset-size6 size3 mtight"},(0,p.kt)("span",{parentName:"span",className:"mord mtight"},"2")))),(0,p.kt)("span",{parentName:"span",className:"vlist-s"},"\u200b")),(0,p.kt)("span",{parentName:"span",className:"vlist-r"},(0,p.kt)("span",{parentName:"span",className:"vlist",style:{height:"0.15em"}},(0,p.kt)("span",{parentName:"span"})))))))))),") parts of dielectric constants:"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-py"},'import matplotlib.pyplot as plt\nfrom matplotlib import rcParamsDefault\nimport numpy as np\n%matplotlib inline\nplt.rcParams["figure.dpi"]=150\nplt.rcParams["figure.facecolor"]="white"\n\ndata_r = np.loadtxt(\'../src/silicon/epsr_silicon.dat\')\ndata_i = np.loadtxt(\'../src/silicon/epsi_silicon.dat\')\nenergy_r, epsilon_r = data_r[:, 0], data_r[:, 2]\nenergy_i, epsilon_i = data_i[:, 0], data_i[:, 2]\n\nplt.plot(energy_r, epsilon_r, lw=1, label="$\\\\epsilon_1$")\nplt.plot(energy_i, epsilon_i, lw=1, label="$\\\\epsilon_2$")\nplt.xlim(0, 15)\nplt.xlabel("Energy (eV)")\nplt.ylabel("$\\\\epsilon_1~/~\\\\epsilon_2$")\nplt.legend(frameon=False)\nplt.show()\n')),(0,p.kt)("picture",null,(0,p.kt)("source",{type:"image/webp",srcSet:n(3844).Z}),(0,p.kt)("img",{src:n(2636).Z,alt:"silicon-epsilon"})),(0,p.kt)("admonition",{type:"warning"},(0,p.kt)("p",{parentName:"admonition"},"Ultra-soft pseudopotentials do not work with ",(0,p.kt)("inlineCode",{parentName:"p"},"epsilon.x"),".")))}g.isMDXComponent=!0},2636:function(e,a,n){a.Z=n.p+"assets/images/silicon-epsilon-6e55dab7b29cb772e78678d57ff267f9.png"},3844:function(e,a,n){a.Z=n.p+"assets/images/silicon-epsilon-83924adfcef99d6186800decced9800e.webp"}}]);